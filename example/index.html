<html>
    <head>
        <title>Tomcar Example</title>
        <script src="../target/require.js" defer async="true" data-main="../target/tomcar"></script>
        <script src="../target/tomcar.js"></script>

        <script>

            // import {GetGAWorkFlow,TomCarStart} from "js/tomcar";

            window.onload=function () {
             let oV=document.getElementById('mainCanvas');
             let gd=oV.getContext('2d'); //图形上下文——绘图接口
             let oColor=document.getElementById('color1');
           
             let color;
             oColor.onchange=function () {
              color=this.value;
             }
           
             let lastX,lastY;
             oV.onmousedown=function (ev) {
           
              lastX=ev.offsetX;
              lastY=ev.offsetY;
           
              oV.onmousemove=function (ev) {
               gd.beginPath();//清除之前所有的路径
                
               gd.moveTo(lastX,lastY);
               gd.lineTo(ev.offsetX,ev.offsetY);
           
               lastX=ev.offsetX;
               lastY=ev.offsetY;
           
               gd.strokeStyle=color;//用获取到的颜色作为绘制颜色
               gd.stroke();
           
              }
              oV.onmouseup=function () {
               oV.onmousemove=null;
               oV.onmouseup=null;
              } 
             }
            }

            function tomcar_run() {
                require(['tomcar','factory'],function(tomcar,factory){
                    var oV=document.getElementById('mainCanvas');
                    var workflow = factory.GetGAWorkFlow(oV,10,100,100,10,0);
                    tomcar.TomCarStart(workflow);
                });

            }

           </script>

    </head>
    <body>
        <div id = "tomcar">
            <input type="color" id="color1" /><br/>
            <canvas id="mainCanvas" width="500" height="500"></canvas>
        </div>
        <button onclick="tomcar_run()" >测试</button>
    </body>
</html>